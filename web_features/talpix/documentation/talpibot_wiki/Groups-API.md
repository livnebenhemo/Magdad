בעמוד זו נתאר יכולת חדשה של המערכת - ניהול קבוצות.

*יכולת זו עדיין בבניה. מוזמנים לעזור לכתוב אותה - פנו לאביחי.*


# רציונל
לאפשר חלוקה לוגית של אנשים לקבוצות. לכל חניך יהיה את הקבוצות שהוא לוקח בהן חלק (לדוגמה, מחזור, צוות, קבוצת אינפי 1 מתלמי וכו׳). כותבי הפיצ׳רים יוכלו להשתמש במידע הזה על מנת לעשות את הפיצ׳רים שלהם מתוחכמים יותר.

# דוגמאות לשימוש קונספטואלי

1.  בעזרת אינטגרציה עם מודל נוסיף כל חניך לקבוצות של הקורסים שהוא לוקח באופן אוטומטי. א׳ הקורס יוכל לשלוח לכולם הודעות באופן פשוט. תהייה אופציה לייצר קבוצת ווטסאפ ישירות.
2.  שליחת הודעות לכלל הקבוצה.
3.  ווידוצ לפי קבוצה - אם עושים פגישה של כלל סגל א׳ (הידוע בגודלו הרב), אפשר להפעיל ווידו״צ לקבוצה המתאימה, ובכך לדעת מי נמצא.

# האובייקט GROUP

כל קבוצה מאוחסנת באובייקט שנקרא GROUP. האובייקט הזה מכיל את המידע הבא:

| שם | הסבר |
| ------ | ------ |
| name| שם הקבוצה |
| description| תיאור הקבוצה |
| participants | אוסף Users אשר מהווים את הקבוצה |
| admins | אוסף Users אשר מהווים את מנהלי הקבוצה |


בהינתן שיש לכם אובייקט GROUP לדוגמא mahzor_40 (בהמשך יהיה הסבר איך לקבל אחד כזה) ניתן לגשת לכל אחד מהאובייקטים הנ"ל על ידי mahzor_40.participants יכיל מערך של כל חניכי מחזר מ'.
 
# שימוש
העבודה עם groups תהיה בדר"כ בקבוצת logic אם כי אפשר להשתמש בה בקובץ UI.
לפני תחילת העבודה צריך לעשות import: 
```python
from TalpiotAPIs import Group
```

## קבלת כל הקבוצות ש-USER שייך אליהם
כל חניך שיש לקבוצות רבות (מחזור מ', מחשביסטים, קפסולת ימין מחזור מ' וכו'..) בשביל לקבל את הקבוצות של משתמש ספציפי נרשום 
```python
user_groups = Group.get_user_groups(user)
```

| פרמטר | הסבר |
| ------ | ------ |
| user | המשתמש שעבורו אנחנו רוצים לקבל את כל הקבוצות שלו |

פונקציה זו תחזיר לנו מערך של כל ה-Groups שהUSER נמצא בהם.
 
## בדיקת האם USER שייך לקבוצה מסויימת
יש שתי דרכים לעשות את הבדיקה הנ"ל.
הדרך הראשונה בהינתן שם של קבוצה ו-USER אז נכתוב: 
```python
is_in_group = Group.is_user_on_group(user, group_name)
```

| פרמטר | הסבר |
| ------ | ------ |
| user | המשתמש שאנחנו רוצים לבדוקאם הוא נמצא בקבוצה מסויימת |
| group_name | השם של הקבוצה שאנחנו מעוניינים לבדוק אם המשתמש נמצא בה |

במידה והמשתמש נמצא אזי is_in_group יהיה שווה true ו-false אחרת

הדרך השנייה זה בהינתן שיש לך אובייקט GROUP ואובייקט USER, ניתן לעשות 
```python
if user in gruop:
   code...
```


## ליצור קבוצה חדשה
ניתן לעשות זאת ישירות מתוך ה PyCharm. בשביל לעשות זאת אתם צריכים לפתוח קובץ פייתון ולהריץ אותו רק פעם אחת בשביל ליצור את הקבוצה.
```python
Group.create_new_group(name: str, description: str, participants: [User], admins: [User]) -> None:
```

| פרמטר | הסבר |
| ------ | ------ |
| naem | השם של הקבוצה |
| description | התיאור של הקבוצה |
| participants | כל המשתתפים שלוקחים חלק בקבוצה |
| admins | המנהלים של הקבוצה |

נניח שיש לנו מערך של users של כל הסג"ב. (איך ניתן לקבל אותו ראו [עבודה עם ה-DB המרכזי](Using the main DB))
אז ניצור את ה-group באופן הבא:

```python
Group.create_new_group(name='סג"ב 2020', description='קבוצה לסג"ב של 2020', participants=users, admins= 
[User.objects.filter(name='אלון גרנות')[0]])
```
